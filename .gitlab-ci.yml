image: golang:1.11-stretch

stages:
  - test

vet:
  variables:
    GO111MODULE: on
  stage: test
  cache:
    paths:
      - $GOPATH/pkg/mod
  script:
    - go vet ./...

test:
  variables:
    GO111MODULE: on
  stage: test
  cache:
    paths:
      - $GOPATH/pkg/mod
  script:
    - go test all -race -v 
